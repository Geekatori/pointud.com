!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.ContactForm=t()}(this,function(){"use strict";var n=function(e,t){if(!(this&&this instanceof n))return new n(e,t);e&&t&&(this.form=e instanceof Node?e:document.querySelector(e),this.endpoint=t.endpoint,this.send())};return n.prototype={hasClass:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},addClass:function(e,t){this.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},removeClass:function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},each:function(e,t){var n,s;for(n=0,s=e.length;n<s;n+=1)t(e[n],n,e)},template:function(e,t){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e=e.replace(new RegExp("{"+n+"}","g"),t[n]));return e},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},removeElementsByClass:function(e){for(var t=document.getElementsByClassName(e);0<t.length;)t[0].parentNode.removeChild(t[0])},post:function(e,t,n,s){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var t="";try{t=JSON.parse(this.responseText)}catch(e){t=this.responseText}n.call(this,t)}else s.call(this,this.responseText)},i.send(t),i=null},param:function(t){return"string"==typeof t?t:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")},send:function(){this.form.addEventListener("submit",function(e){e.preventDefault();var t,n=document.querySelectorAll(".form-control");this.each(n,function(e,t){this.hasClass(e.parentNode,"has-error")&&(this.removeClass(e.parentNode,"has-error"),this.removeElementsByClass("help-block"))}.bind(this)),t={name:document.querySelector('input[name="form-name"]').value,email:document.querySelector('input[name="form-email"]').value,subject:document.querySelector('input[name="form-subject"]').value,message:document.querySelector('textarea[name="form-message"]').value},this.post(this.endpoint,this.param(t),this.feedback.bind(this),this.fail.bind(this))}.bind(this),!1)},feedback:function(e){if(e.success){var t=this.template('<div class="container alert alert-success">{report} <p><a href="#" title="Retour" class="btn btn-link" id="hide-form">Retour</a></p></div>',{report:e.message});this.empty(this.form),this.form.insertAdjacentHTML("beforeend",t),document.getElementById("hide-form").addEventListener("click",function(e){e.preventDefault(),document.body.classList.remove("visible-contact")})}else{if(e.errors.name){var n=document.querySelector('input[name="form-name"]').parentNode;this.addClass(n,"has-error"),r=this.template('<span class="help-block">{report}</span>',{report:e.errors.name}),n.insertAdjacentHTML("beforeend",r)}if(e.errors.email){var s=document.querySelector('input[name="form-email"]').parentNode;this.addClass(s,"has-error"),r=this.template('<span class="help-block">{report}</span>',{report:e.errors.email}),s.insertAdjacentHTML("beforeend",r)}if(e.errors.subject){var i=document.querySelector('input[name="form-subject"]').parentNode;this.addClass(i,"has-error"),r=this.template('<span class="help-block">{report}</span>',{report:e.errors.subject}),i.insertAdjacentHTML("beforeend",r)}if(e.errors.message){var r,o=document.querySelector('textarea[name="form-message"]').parentNode;this.addClass(o,"has-error"),r=this.template('<span class="help-block">{report}</span>',{report:e.errors.message}),o.insertAdjacentHTML("beforeend",r)}}},fail:function(e){console.log(e)}},n}),function(e,i,t){"use strict";var n=function(e,t){this.el=this.isString(e)?i.querySelectorAll(e):[e],this.config=[],this.options=t,this.selectors=[],this.init(),this.destroy=function(){this.loop(function(e){e.removeEventListener("reset",this.events.reset),this.removeClasses(e)},function(e){this.reset(e)})},this.rebuild=function(){this.loop(null,function(e){this.floatLabel(e,!0)})}};n.prototype={defaults:{customEvent:null,customLabel:null,customPlaceholder:null,exclude:".no-label",inputRegex:/email|number|password|search|tel|text|url/,prefix:"fl-",prioritize:"label",requiredClass:"required",style:0,transform:"input,select,textarea"},init:function(){this.initEvents(),this.loop(function(e,t){var n=this.config[t].style;e.addEventListener("reset",this.events.reset),e.classList.add(this.prefixed("form")),n&&e.classList.add(this.prefixed("style-"+n))},function(e){this.floatLabel(e)})},initEvents:function(){this.events={blur:this.onBlur.bind(this),change:this.onInput.bind(this),focus:this.onFocus.bind(this),input:this.onInput.bind(this),reset:this.onReset.bind(this)}},addRemove:function(e){return e?"add":"remove"},build:function(e){var t=this.getLabel(e);t&&(e.classList.add(this.prefixed(e.tagName.toLowerCase())),this.setLabel(t,e),this.setPlaceholder(t,e),this.wrapLabel(t,e),this.handleEvents(e,"add"),"function"==typeof this.config[this.current].customEvent&&this.config[this.current].customEvent.call(this,e))},createEl:function(e,t){var n="string"==typeof e?i.createElement(e):e;for(var s in t=t||{})t.hasOwnProperty(s)&&n.setAttribute(s,t[s]);return n},extend:function(){var e=[].slice.call(arguments),n=e[0],s=e.slice(1);return Object.keys(s).forEach(function(e){for(var t in s[e])s[e].hasOwnProperty(t)&&(n[t]=s[e][t])}),n},floatLabel:function(e,t){if(this.isValidField(e)){if(this.hasParent(e)){if(!0!==t)return;this.reset(e)}this.build(e)}},getLabel:function(e){var t='label[for="'+e.getAttribute("id")+'"]',n=this.el[this.current].querySelectorAll(t);return 1<n.length&&(n=e.parentNode.querySelectorAll(t)),1===n.length&&n[0]},getLabelText:function(e,t){var n=e.textContent.replace(/[*:]/g,"").trim(),s=t.getAttribute("placeholder");return(!n||n&&s&&"placeholder"===this.config[this.current].prioritize)&&(n=s),n},handleEvents:function(t,n){var s=this.events,i="SELECT"===t.nodeName&&this.isMSBrowser();["blur","input","focus"].forEach(function(e){"input"!==e||"file"!==t.type&&!i||(e="change"),t[n+"EventListener"](e,s[e])})},hasParent:function(e){return e.parentNode.classList.contains(this.prefixed("wrap"))},isMSBrowser:function(){return!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g)||!!navigator.userAgent.match(/Edge/g)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isValidField:function(e){var t="INPUT"===e.tagName&&!this.config[this.current].inputRegex.test(e.getAttribute("type")),n="SELECT"===e.tagName&&null!==e.getAttribute("multiple");return e.getAttribute("id")&&!t&&!n},loop:function(e,t){for(var n=0;n<this.el.length;++n){if(void 0===this.selectors[n]){var s=this.extend({},this.defaults,this.options,this.el[n].getAttribute("data-options")),i=":not("+s.exclude.split(/[\s,]+/).join("):not(")+")";this.selectors[n]=s.transform.replace(/,/g,i+",")+i,this.config[n]=s}var r=this.el[n].querySelectorAll(this.selectors[n]);this.current=n,"function"==typeof e&&e.call(this,this.el[n],n);for(var o=0;o<r.length;++o)"function"==typeof t&&t.call(this,r[o],n)}},onBlur:function(e){e.target.parentNode.classList.remove(this.prefixed("has-focus"))},onInput:function(e){e.target.parentNode.classList[this.addRemove(e.target.value.length)](this.prefixed("is-active"))},onFocus:function(e){e.target.parentNode.classList.add(this.prefixed("has-focus"))},onReset:function(){setTimeout(this.resetFields.bind(this))},prefixed:function(e){return this.config[this.current].prefix+e},removeClasses:function(e){var t=this.config[this.current].prefix,n=e.className.split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)});e.className=n.join(" ").trim()},reset:function(e){var t=e.parentNode;if(this.hasParent(e)){for(var n=i.createDocumentFragment();t.firstElementChild;){var s=t.firstElementChild;this.removeClasses(s),n.appendChild(s)}t.parentNode.replaceChild(n,t),this.resetPlaceholder(e),this.handleEvents(e,"remove")}},resetFields:function(){for(var e=this.el[this.current].querySelectorAll(this.selectors[this.current]),t=0;t<e.length;++t)e[t].parentNode.classList[this.addRemove("SELECT"===e[t].tagName&&""!==e[t].value)](this.prefixed("is-active"))},resetPlaceholder:function(e){var t="data-placeholder",n=e.getAttribute(t);null!==n&&(e.removeAttribute(t),e.setAttribute("placeholder",n))},setLabel:function(e,t){e.classList.add(this.prefixed("label")),e.textContent=this.getLabelText(e,t),"function"==typeof this.config[this.current].customLabel&&(e.textContent=this.config[this.current].customLabel.call(this,e,t))},setPlaceholder:function(e,t){var n=t.getAttribute("placeholder");"label"!==this.config[this.current].prioritize&&n||(n&&t.setAttribute("data-placeholder",n),n=this.getLabelText(e,t)),"function"==typeof this.config[this.current].customPlaceholder&&(n=this.config[this.current].customPlaceholder.call(this,n,t,e)),"SELECT"===t.tagName?this.setSelectPlaceholder(t,n):t.setAttribute("placeholder",n)},setSelectPlaceholder:function(e,t){var n=e.firstElementChild;if(n.hasAttribute("value")&&n.value){var s=!0!==e.options[e.selectedIndex].defaultSelected;e.insertBefore(new Option(t,"",s,s),n)}else n.setAttribute("value","");""===n.textContent&&(n.textContent=t)},wrapLabel:function(e,t){var n=this.createEl("div",{class:this.prefixed("wrap")+" "+this.prefixed("wrap-"+t.tagName.toLowerCase())});void 0!==t.value&&t.value.length&&n.classList.add(this.prefixed("is-active")),(null!==t.getAttribute("required")||t.classList.contains(this.config[this.current].requiredClass))&&n.classList.add(this.prefixed("is-required")),t.parentNode.insertBefore(n,t),n.appendChild(e),n.appendChild(t)}},"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof module&&module.exports?module.exports=n:e.FloatLabels=n}(window,document),function(){"use strict";function a(e){return+Math.round(100*(e+1e-5))/100}console.log("Sinon, on peut aussi discuter autour d'un 🍵 ou d'une 🍺 !");new FloatLabels("form",{style:2});window.onorientationchange=function(){document.body.scrollTop=0},window.ontouchmove=function(){return!1},window.onload=function(){var e,t,n,s,i,r,o;document.body.className="",e=document.getElementById("showForm"),t=document.getElementById("showAbout"),n=document.getElementsByClassName("close"),s="visible-contact",i="visible-about",e.addEventListener("click",function(e){e.preventDefault(),document.body.classList.add(s)}),t.addEventListener("click",function(e){e.preventDefault(),document.body.classList.add(i)}),Array.from(n).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),document.body.classList.remove(s,i)})}),document.onkeydown=function(e){e=e||window.event,("undefined"!=typeof key?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&document.body.classList.remove(s,i)},o=document.querySelector(".bg img"),document.body.onmousemove=function(i){clearTimeout(r),r=setTimeout(function(){var e=i.pageX-window.innerWidth/2,t=i.pageY-window.innerHeight/2,n=a(-5*e/window.innerWidth),s=a(-5*t/window.innerHeight);o.style.transform="translate3d("+n+"px,"+s+"px,0)"},10)}}}();
//# sourceMappingURL=main.build.js.map
